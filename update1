<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Timezone Converter</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

  <div class="bg-white p-6 rounded-2xl shadow-lg max-w-md w-full space-y-4">
    <h1 class="text-xl font-semibold">Timezone Converter</h1>

    <!-- State Selection -->
    <div>
      <label class="block text-gray-600 mb-1">Select State</label>
      <select id="stateSelect" class="w-full border rounded-lg p-2">
        <option value="EST">New York (EST)</option>
        <option value="CST">Texas (CST)</option>
        <option value="PST">California (PST)</option>
        <option value="EST">Florida (EST)</option>
      </select>
    </div>

    <!-- Time Zone Display -->
    <div class="text-gray-700">
      Time Zone: <span id="timeZone" class="font-bold">EST</span>
    </div>

    <!-- Original Time Range -->
    <div>
      <label class="block text-gray-600 mb-1">Original Time Range</label>
      <div class="flex space-x-2">
        <input id="startTime" type="text" value="12:00 PM" class="w-1/2 border rounded-lg p-2" />
        <input id="endTime" type="text" value="4:00 PM" class="w-1/2 border rounded-lg p-2" />
      </div>
    </div>

    <!-- Buffer -->
    <div class="flex items-center space-x-2">
      <input id="addBuffer" type="checkbox" />
      <label class="text-gray-600">Add buffer (1 hour before and after)</label>
    </div>

    <!-- Convert Button -->
    <button id="convertBtn" class="w-full bg-blue-600 text-white font-semibold py-2 rounded-lg hover:bg-blue-700">
      Convert to CST
    </button>

    <!-- Result -->
    <div id="result" class="hidden mt-4 p-3 bg-gray-100 rounded-lg">
      <p class="font-semibold">Converted Time (CST):</p>
      <p id="convertedTime"></p>
    </div>
  </div>

  <script>
    const stateOffsets = { EST: -5, CST: -6, PST: -8 };
    const stateSelect = document.getElementById("stateSelect");
    const timeZone = document.getElementById("timeZone");
    const startTimeInput = document.getElementById("startTime");
    const endTimeInput = document.getElementById("endTime");
    const addBufferCheckbox = document.getElementById("addBuffer");
    const convertBtn = document.getElementById("convertBtn");
    const resultDiv = document.getElementById("result");
    const convertedTimeEl = document.getElementById("convertedTime");

    stateSelect.addEventListener("change", () => {
      timeZone.textContent = stateSelect.value;
    });

    function to24Hour(time) {
      let [hour, minute] = time.split(":");
      minute = minute.slice(0, 2);
      const isPM = time.toUpperCase().includes("PM");
      hour = parseInt(hour);
      if (isPM && hour !== 12) hour += 12;
      if (!isPM && hour === 12) hour = 0;
      return hour * 60 + parseInt(minute);
    }

    function to12Hour(minutes) {
      let hour = Math.floor(minutes / 60);
      let min = minutes % 60;
      const ampm = hour >= 12 ? "PM" : "AM";
      hour = hour % 12 || 12;
      return `${hour}:${min.toString().padStart(2, "0")} ${ampm}`;
    }

    convertBtn.addEventListener("click", () => {
      const CST_OFFSET = -6;
      const selectedTZ = stateSelect.value;
      const diff = CST_OFFSET - stateOffsets[selectedTZ];

      let startMinutes = to24Hour(startTimeInput.value) + diff * 60;
      let endMinutes = to24Hour(endTimeInput.value) + diff * 60;

      if (addBufferCheckbox.checked) {
        startMinutes -= 60;
        endMinutes += 60;
      }

      convertedTimeEl.textContent = `${to12Hour(startMinutes)} - ${to12Hour(endMinutes)}`;
      resultDiv.classList.remove("hidden");
    });
  </script>
</body>
</html>
